diff --git a/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js b/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js
index 7be4e5c..345f50c 100644
--- a/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js
+++ b/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js
@@ -114,7 +114,8 @@ const MarkdownTextInput = /*#__PURE__*/React.forwardRef(({
   style = {},
   value,
   autoFocus = false,
-  onContentSizeChange
+  onContentSizeChange,
+  id
 }, ref) => {
   const compositionRef = useRef(false);
   const pasteRef = useRef(false);
@@ -169,16 +170,26 @@ const MarkdownTextInput = /*#__PURE__*/React.forwardRef(({
     caretColor: flattenedStyle.color || 'black'
   }, disabled && styles.disabledInputStyles, createReactDOMStyle(preprocessStyle(flattenedStyle))]), [flattenedStyle, disabled]);
   const undo = useCallback(target => {
-    if (!history.current) return '';
+    if (!history.current) {
+      return {
+        text: '',
+        cursorPosition: 0
+      };
+    }
     const item = history.current.undo();
     const undoValue = item ? denormalizeValue(item.text) : null;
-    return parseText(target, undoValue, processedMarkdownStyle, item ? item.cursorPosition : null, false).text;
+    return parseText(target, undoValue, processedMarkdownStyle, item ? item.cursorPosition : null, false);
   }, [parseText, processedMarkdownStyle]);
   const redo = useCallback(target => {
-    if (!history.current) return '';
+    if (!history.current) {
+      return {
+        text: '',
+        cursorPosition: 0
+      };
+    }
     const item = history.current.redo();
     const redoValue = item ? denormalizeValue(item.text) : null;
-    return parseText(target, redoValue, processedMarkdownStyle, item ? item.cursorPosition : null, false).text;
+    return parseText(target, redoValue, processedMarkdownStyle, item ? item.cursorPosition : null, false);
   }, [parseText, processedMarkdownStyle]);
 
   // We have to process value property since contentEditable div adds one additional '\n' at the end of the text if we are entering new line
@@ -249,32 +260,43 @@ const MarkdownTextInput = /*#__PURE__*/React.forwardRef(({
     if (!divRef.current || !(e.target instanceof HTMLElement)) {
       return;
     }
+    const prevSelection = contentSelection.current ?? {
+      start: 0,
+      end: 0
+    };
+    const prevTextLength = CursorUtils.getPrevTextLength() ?? 0;
     const changedText = e.target.innerText;
     if (compositionRef.current && !BrowserUtils.isMobile) {
       updateTextColor(divRef.current, changedText);
       compositionRef.current = false;
       return;
     }
-    let text = '';
+    let newInputUpdate;
     const nativeEvent = e.nativeEvent;
-    switch (nativeEvent.inputType) {
+    const inputType = nativeEvent.inputType;
+    switch (inputType) {
       case 'historyUndo':
-        text = undo(divRef.current);
+        newInputUpdate = undo(divRef.current);
         break;
       case 'historyRedo':
-        text = redo(divRef.current);
+        newInputUpdate = redo(divRef.current);
         break;
       case 'insertFromPaste':
         // if there is no newline at the end of the copied text, contentEditable adds invisible <br> tag at the end of the text, so we need to normalize it
         if (changedText.length > 2 && changedText[changedText.length - 2] !== '\n' && changedText[changedText.length - 1] === '\n') {
-          text = parseText(divRef.current, normalizeValue(changedText), processedMarkdownStyle).text;
+          newInputUpdate = parseText(divRef.current, normalizeValue(changedText), processedMarkdownStyle);
           break;
         }
-        text = parseText(divRef.current, changedText, processedMarkdownStyle).text;
+        newInputUpdate = parseText(divRef.current, changedText, processedMarkdownStyle);
         break;
       default:
-        text = parseText(divRef.current, changedText, processedMarkdownStyle).text;
+        newInputUpdate = parseText(divRef.current, changedText, processedMarkdownStyle);
     }
+    const {
+      text,
+      cursorPosition
+    } = newInputUpdate;
+    const normalizedText = normalizeValue(text);
     if (pasteRef !== null && pasteRef !== void 0 && pasteRef.current) {
       pasteRef.current = false;
       updateSelection(e);
@@ -283,10 +305,33 @@ const MarkdownTextInput = /*#__PURE__*/React.forwardRef(({
     if (onChange) {
       const event = e;
       setEventProps(event);
+
+      // The new text is between the prev start selection and the new end selection, can be empty
+      const addedText = normalizedText.slice(prevSelection.start, cursorPosition ?? 0);
+      // The length of the text that replaced the before text
+      const count = addedText.length;
+      // The start index of the replacement operation
+      let start = prevSelection.start;
+      const prevSelectionRange = prevSelection.end - prevSelection.start;
+      // The length the deleted text had before
+      let before = prevSelectionRange;
+      if (prevSelectionRange === 0 && (inputType === 'deleteContentBackward' || inputType === 'deleteContentForward')) {
+        // its possible the user pressed a delete key without a selection range, so we need to adjust the before value to have the length of the deleted text
+        before = prevTextLength - normalizedText.length;
+      }
+      if (inputType === 'deleteContentBackward') {
+        // When the user does a backspace delete he expects the content before the cursor to be removed.
+        // For this the start value needs to be adjusted (its as if the selection was before the text that we want to delete)
+        start = Math.max(start - before, 0);
+      }
+      event.nativeEvent.count = count;
+      event.nativeEvent.before = before;
+      event.nativeEvent.start = start;
+
+      // @ts-expect-error TODO: Remove once react native PR merged https://github.com/facebook/react-native/pull/45248
       onChange(event);
     }
     if (onChangeText) {
-      const normalizedText = normalizeValue(text);
       onChangeText(normalizedText);
     }
     handleContentSizeChange();
@@ -389,8 +434,12 @@ const MarkdownTextInput = /*#__PURE__*/React.forwardRef(({
     e.target.value = normalizeValue(divRef.current.innerText || '');
     onClick(e);
   }, [onClick, updateSelection]);
-  const handlePaste = useCallback(() => {
+  const handlePaste = useCallback(e => {
     pasteRef.current = true;
+    e.preventDefault();
+    const clipboardData = e.clipboardData;
+    const text = clipboardData.getData('text/plain');
+    document.execCommand('insertText', false, text);
   }, []);
   const startComposition = useCallback(() => {
     compositionRef.current = true;
@@ -468,6 +517,7 @@ const MarkdownTextInput = /*#__PURE__*/React.forwardRef(({
     /*#__PURE__*/
     // eslint-disable-next-line jsx-a11y/no-static-element-interactions
     React.createElement("div", {
+      id: id,
       ref: setRef,
       contentEditable: !disabled,
       style: inputStyles,
diff --git a/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js.map b/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js.map
index a44a5fa..5ddc80a 100644
--- a/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js.map
+++ b/node_modules/@expensify/react-native-live-markdown/lib/module/MarkdownTextInput.web.js.map
@@ -1 +1 @@
-{"version":3,"names":["React","useEffect","useRef","useCallback","useMemo","useLayoutEffect","StyleSheet","ParseUtils","CursorUtils","StyleUtils","BrowserUtils","InputHistory","require","useClientEffect","window","createReactDOMStyle","default","e","Error","preprocessStyle","dangerousStyleValue","focusTimeout","normalizeValue","value","replace","denormalizeValue","endsWith","isEventComposing","nativeEvent","isComposing","keyCode","ZERO_WIDTH_SPACE","getPlaceholderValue","placeholder","length","processUnitsInMarkdownStyle","input","output","JSON","parse","stringify","Object","keys","forEach","key","obj","prop","processMarkdownStyle","mergeMarkdownStyleWithDefault","getElementHeight","node","styles","numberOfLines","tempElement","document","createElement","setAttribute","assign","style","innerText","Array","fill","join","parentElement","appendChild","height","clientHeight","removeChild","MarkdownTextInput","forwardRef","accessibilityLabel","accessibilityLabelledBy","accessibilityRole","autoCapitalize","autoCorrect","blurOnSubmit","clearTextOnFocus","dir","disabled","multiline","markdownStyle","onBlur","onChange","onChangeText","onClick","onFocus","onKeyPress","onSelectionChange","onSubmitEditing","placeholderTextColor","selectTextOnFocus","spellCheck","selection","autoFocus","onContentSizeChange","ref","compositionRef","pasteRef","divRef","currentlyFocusedField","contentSelection","className","history","dimensions","current","flattenedStyle","flatten","heightSafePlaceholder","setEventProps","text","target","parseText","customMarkdownStyles","cursorPosition","shouldAddToHistory","parsedText","throttledAdd","processedMarkdownStyle","newMarkdownStyle","inputStyles","defaultInputStyles","caretColor","color","disabledInputStyles","undo","item","undoValue","redo","redoValue","processedValue","updateTextColor","String","handleSelectionChange","event","updateRefSelectionVariables","newSelection","start","end","markdownHTMLInput","selectionStart","selectionEnd","updateSelection","predefinedSelection","getCurrentCursorPosition","handleContentSizeChange","_dimensions$current","offsetWidth","newWidth","offsetHeight","newHeight","width","contentSize","handleOnChangeText","HTMLElement","changedText","isMobile","inputType","normalizedText","handleKeyPress","hostNode","stopPropagation","metaKey","preventDefault","shiftKey","blurOnSubmitDefault","shouldBlurOnSubmit","isDefaultPrevented","execCommand","scrollCursorIntoView","setTimeout","blur","handleFocus","setCursorPosition","valueLength","clearTimeout","handleBlur","removeSelection","handleClick","handlePaste","startComposition","setRef","currentRef","r","isFocused","activeElement","clear","undefined","parseAndStyleValue","adjustHeight","elementHeight","maxHeight","focus","contentEditable","role","onKeyDown","onCompositionStart","onKeyUp","onInput","onPaste","create","borderColor","borderWidth","borderStyle","fontFamily","boxSizing","whiteSpace","overflowY","overflowX","overflowWrap","opacity","cursor"],"sourceRoot":"../../src","sources":["MarkdownTextInput.web.tsx"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["React","useEffect","useRef","useCallback","useMemo","useLayoutEffect","StyleSheet","ParseUtils","CursorUtils","StyleUtils","BrowserUtils","InputHistory","require","useClientEffect","window","createReactDOMStyle","default","e","Error","preprocessStyle","dangerousStyleValue","focusTimeout","normalizeValue","value","replace","denormalizeValue","endsWith","isEventComposing","nativeEvent","isComposing","keyCode","ZERO_WIDTH_SPACE","getPlaceholderValue","placeholder","length","processUnitsInMarkdownStyle","input","output","JSON","parse","stringify","Object","keys","forEach","key","obj","prop","processMarkdownStyle","mergeMarkdownStyleWithDefault","getElementHeight","node","styles","numberOfLines","tempElement","document","createElement","setAttribute","assign","style","innerText","Array","fill","join","parentElement","appendChild","height","clientHeight","removeChild","MarkdownTextInput","forwardRef","accessibilityLabel","accessibilityLabelledBy","accessibilityRole","autoCapitalize","autoCorrect","blurOnSubmit","clearTextOnFocus","dir","disabled","multiline","markdownStyle","onBlur","onChange","onChangeText","onClick","onFocus","onKeyPress","onSelectionChange","onSubmitEditing","placeholderTextColor","selectTextOnFocus","spellCheck","selection","autoFocus","onContentSizeChange","id","ref","compositionRef","pasteRef","divRef","currentlyFocusedField","contentSelection","className","history","dimensions","current","flattenedStyle","flatten","heightSafePlaceholder","setEventProps","text","target","parseText","customMarkdownStyles","cursorPosition","shouldAddToHistory","parsedText","throttledAdd","processedMarkdownStyle","newMarkdownStyle","inputStyles","defaultInputStyles","caretColor","color","disabledInputStyles","undo","item","undoValue","redo","redoValue","processedValue","updateTextColor","String","handleSelectionChange","event","updateRefSelectionVariables","newSelection","start","end","markdownHTMLInput","selectionStart","selectionEnd","updateSelection","predefinedSelection","getCurrentCursorPosition","handleContentSizeChange","_dimensions$current","offsetWidth","newWidth","offsetHeight","newHeight","width","contentSize","handleOnChangeText","HTMLElement","prevSelection","prevTextLength","getPrevTextLength","changedText","isMobile","newInputUpdate","inputType","normalizedText","addedText","slice","count","prevSelectionRange","before","handleKeyPress","hostNode","stopPropagation","metaKey","preventDefault","shiftKey","blurOnSubmitDefault","shouldBlurOnSubmit","isDefaultPrevented","execCommand","scrollCursorIntoView","setTimeout","blur","handleFocus","setCursorPosition","valueLength","clearTimeout","handleBlur","removeSelection","handleClick","handlePaste","clipboardData","getData","startComposition","setRef","currentRef","r","isFocused","activeElement","clear","undefined","parseAndStyleValue","adjustHeight","elementHeight","maxHeight","focus","contentEditable","role","onKeyDown","onCompositionStart","onKeyUp","onInput","onPaste","create","borderColor","borderWidth","borderStyle","fontFamily","boxSizing","whiteSpace","overflowY","overflowX","overflowWrap","opacity","cursor"],"sourceRoot":"../../src","sources":["MarkdownTextInput.web.tsx"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js b/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js
index 6a4b510..fbab71b 100644
--- a/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js
+++ b/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js
@@ -1,5 +1,8 @@
 import * as BrowserUtils from './browserUtils';
 let prevTextLength;
+function getPrevTextLength() {
+  return prevTextLength;
+}
 function findTextNodes(textNodes, node) {
   if (node.nodeType === Node.TEXT_NODE) {
     textNodes.push(node);
@@ -53,7 +56,7 @@ function setCursorPosition(target, start, end = null) {
         // 3. Caret at the end of whole input, when pressing enter
         // 4. All other placements
         if (prevChar === '\n' && prevTextLength !== undefined && prevTextLength < textCharacters.length) {
-          if (nextChar !== '\n' && i !== n - 1 && nextChar) {
+          if (nextChar && nextChar !== '\n' && i !== n - 1) {
             range.setStart(textNodes[i + 1], 0);
           } else if (i !== textNodes.length - 1) {
             range.setStart(textNodes[i], 1);
@@ -136,5 +139,5 @@ function scrollCursorIntoView(target) {
     target.scrollTo(0, topToCaret + target.scrollTop + inputOffset);
   }
 }
-export { getCurrentCursorPosition, moveCursorToEnd, setCursorPosition, setPrevText, removeSelection, scrollCursorIntoView };
+export { getCurrentCursorPosition, moveCursorToEnd, setCursorPosition, setPrevText, removeSelection, scrollCursorIntoView, getPrevTextLength };
 //# sourceMappingURL=cursorUtils.js.map
\ No newline at end of file
diff --git a/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js.map b/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js.map
index 4ab44be..05849b4 100644
--- a/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js.map
+++ b/node_modules/@expensify/react-native-live-markdown/lib/module/web/cursorUtils.js.map
@@ -1 +1 @@
-{"version":3,"names":["BrowserUtils","prevTextLength","findTextNodes","textNodes","node","nodeType","Node","TEXT_NODE","push","i","length","childNodes","childNode","setPrevText","target","_textNodes$map","text","map","e","nodeValue","join","split","setCursorPosition","start","end","_textNodes$map2","document","activeElement","range","createRange","selectNodeContents","textCharacters","prevChar","nextChar","charCount","startNode","endNode","n","textNode","nextCharCount","undefined","setStart","setEnd","collapse","selection","window","getSelection","setBaseAndExtent","startContainer","startOffset","endContainer","endOffset","scrollCursorIntoView","moveCursorToEnd","getCurrentCursorPosition","rangeCount","getRangeAt","preSelectionRange","cloneRange","toString","removeSelection","removeAllRanges","selectionStart","value","isFirefox","caretRect","getClientRects","editableRect","getBoundingClientRect","paddingTop","parseFloat","getComputedStyle","borderTop","borderTopWidth","top","bottom","topToCaret","inputHeight","height","inputOffset","isChromium","scrollTo","scrollTop"],"sourceRoot":"../../../src","sources":["web/cursorUtils.ts"],"mappings":"AAAA,OAAO,KAAKA,YAAY,MAAM,gBAAgB;AAE9C,IAAIC,cAAkC;AAEtC,SAASC,aAAaA,CAACC,SAAiB,EAAEC,IAAe,EAAE;EACzD,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE;IACpCJ,SAAS,CAACK,IAAI,CAACJ,IAAY,CAAC;EAC9B,CAAC,MAAM;IACL,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEC,MAAM,GAAGN,IAAI,CAACO,UAAU,CAACD,MAAM,EAAED,CAAC,GAAGC,MAAM,EAAE,EAAED,CAAC,EAAE;MAChE,MAAMG,SAAS,GAAGR,IAAI,CAACO,UAAU,CAACF,CAAC,CAAC;MACpC,IAAIG,SAAS,EAAE;QACbV,aAAa,CAACC,SAAS,EAAES,SAAS,CAAC;MACrC;IACF;EACF;AACF;AAEA,SAASC,WAAWA,CAACC,MAAmB,EAAE;EAAA,IAAAC,cAAA;EACxC,IAAIC,IAAI,GAAG,EAAE;EACb,MAAMb,SAAiB,GAAG,EAAE;EAC5BD,aAAa,CAACC,SAAS,EAAEW,MAAM,CAAC;EAChCE,IAAI,IAAAD,cAAA,GAAGZ,SAAS,CACbc,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,SAAS,IAAI,EAAE,CAAC,cAAAJ,cAAA,gBAAAA,cAAA,GADzBA,cAAA,CAEHK,IAAI,CAAC,EAAE,CAAC,cAAAL,cAAA,uBAFLA,cAAA,CAGHM,KAAK,CAAC,EAAE,CAAC;EAEbpB,cAAc,GAAGe,IAAI,CAACN,MAAM;AAC9B;AAEA,SAASY,iBAAiBA,CAACR,MAAmB,EAAES,KAAa,EAAEC,GAAkB,GAAG,IAAI,EAAE;EAAA,IAAAC,eAAA;EACxF;EACA,IAAIX,MAAM,KAAKY,QAAQ,CAACC,aAAa,EAAE;IACrC;EACF;EAEA,MAAMC,KAAK,GAAGF,QAAQ,CAACG,WAAW,CAAC,CAAC;EACpCD,KAAK,CAACE,kBAAkB,CAAChB,MAAM,CAAC;EAEhC,MAAMX,SAAiB,GAAG,EAAE;EAC5BD,aAAa,CAACC,SAAS,EAAEW,MAAM,CAAC;;EAEhC;EACA;EACA,MAAMiB,cAAc,IAAAN,eAAA,GAAGtB,SAAS,CAC7Bc,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,SAAS,IAAI,EAAE,CAAC,cAAAM,eAAA,gBAAAA,eAAA,GADTA,eAAA,CAEnBL,IAAI,CAAC,EAAE,CAAC,cAAAK,eAAA,uBAFWA,eAAA,CAGnBJ,KAAK,CAAC,EAAE,CAAC;EACb,MAAMW,QAAQ,GAAG,CAAAD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAGR,KAAK,GAAG,CAAC,CAAC,KAAI,EAAE;EAClD,MAAMU,QAAQ,GAAG,CAAAF,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAGR,KAAK,CAAC,KAAI,EAAE;EAE9C,IAAIW,SAAS,GAAG,CAAC;EACjB,IAAIC,SAAsB,GAAG,IAAI;EACjC,IAAIC,OAAoB,GAAG,IAAI;EAC/B,MAAMC,CAAC,GAAGlC,SAAS,CAACO,MAAM;EAC1B,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4B,CAAC,EAAE,EAAE5B,CAAC,EAAE;IAC1B,MAAM6B,QAAQ,GAAGnC,SAAS,CAACM,CAAC,CAAC;IAC7B,IAAI6B,QAAQ,EAAE;MACZ,MAAMC,aAAa,GAAGL,SAAS,GAAGI,QAAQ,CAAC5B,MAAM;MAEjD,IAAI,CAACyB,SAAS,IAAIZ,KAAK,IAAIW,SAAS,KAAKX,KAAK,IAAIgB,aAAa,IAAKhB,KAAK,KAAKgB,aAAa,IAAI9B,CAAC,GAAG4B,CAAC,GAAG,CAAE,CAAC,EAAE;QAC1GF,SAAS,GAAGG,QAAQ;;QAEpB;QACA;QACA;QACA;QACA;QACA,IAAIN,QAAQ,KAAK,IAAI,IAAI/B,cAAc,KAAKuC,SAAS,IAAIvC,cAAc,GAAG8B,cAAc,CAACrB,MAAM,EAAE;UAC/F,IAAIuB,QAAQ,KAAK,IAAI,EAAE;YACrBL,KAAK,CAACa,QAAQ,CAACtC,SAAS,CAACM,CAAC,GAAG,CAAC,CAAC,EAAU,CAAC,CAAC;UAC7C,CAAC,MAAM,IAAIA,CAAC,KAAKN,SAAS,CAACO,MAAM,GAAG,CAAC,EAAE;YACrCkB,KAAK,CAACa,QAAQ,CAACtC,SAAS,CAACM,CAAC,CAAC,EAAU,CAAC,CAAC;UACzC,CAAC,MAAM;YACLmB,KAAK,CAACa,QAAQ,CAACH,QAAQ,EAAEf,KAAK,GAAGW,SAAS,CAAC;UAC7C;QACF,CAAC,MAAM;UACLN,KAAK,CAACa,QAAQ,CAACH,QAAQ,EAAEf,KAAK,GAAGW,SAAS,CAAC;QAC7C;QACA,IAAI,CAACV,GAAG,EAAE;UACR;QACF;MACF;MACA,IAAIA,GAAG,IAAI,CAACY,OAAO,IAAIZ,GAAG,IAAIU,SAAS,KAAKV,GAAG,IAAIe,aAAa,IAAKf,GAAG,KAAKe,aAAa,IAAI9B,CAAC,GAAG4B,CAAC,GAAG,CAAE,CAAC,EAAE;QACzGD,OAAO,GAAGE,QAAQ;QAClBV,KAAK,CAACc,MAAM,CAACJ,QAAQ,EAAEd,GAAG,GAAGU,SAAS,CAAC;MACzC;MACAA,SAAS,GAAGK,aAAa;IAC3B;EACF;EAEA,IAAI,CAACf,GAAG,EAAE;IACRI,KAAK,CAACe,QAAQ,CAAC,IAAI,CAAC;EACtB;EAEA,MAAMC,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;EACvC,IAAIF,SAAS,EAAE;IACbA,SAAS,CAACG,gBAAgB,CAACnB,KAAK,CAACoB,cAAc,EAAEpB,KAAK,CAACqB,WAAW,EAAErB,KAAK,CAACsB,YAAY,EAAEtB,KAAK,CAACuB,SAAS,CAAC;EAC1G;EAEAC,oBAAoB,CAACtC,MAA0B,CAAC;AAClD;AAEA,SAASuC,eAAeA,CAACvC,MAAmB,EAAE;EAC5C,MAAMc,KAAK,GAAGF,QAAQ,CAACG,WAAW,CAAC,CAAC;EACpC,MAAMe,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;EACvC,IAAIF,SAAS,EAAE;IACbhB,KAAK,CAACa,QAAQ,CAAC3B,MAAM,EAAEA,MAAM,CAACH,UAAU,CAACD,MAAM,CAAC;IAChDkB,KAAK,CAACe,QAAQ,CAAC,IAAI,CAAC;IACpBC,SAAS,CAACG,gBAAgB,CAACnB,KAAK,CAACoB,cAAc,EAAEpB,KAAK,CAACqB,WAAW,EAAErB,KAAK,CAACsB,YAAY,EAAEtB,KAAK,CAACuB,SAAS,CAAC;EAC1G;AACF;AAEA,SAASG,wBAAwBA,CAACxC,MAAmB,EAAE;EACrD,MAAM8B,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;EACvC,IAAI,CAACF,SAAS,IAAKA,SAAS,IAAIA,SAAS,CAACW,UAAU,KAAK,CAAE,EAAE;IAC3D,OAAO,IAAI;EACb;EACA,MAAM3B,KAAK,GAAGgB,SAAS,CAACY,UAAU,CAAC,CAAC,CAAC;EACrC,MAAMC,iBAAiB,GAAG7B,KAAK,CAAC8B,UAAU,CAAC,CAAC;EAC5CD,iBAAiB,CAAC3B,kBAAkB,CAAChB,MAAM,CAAC;EAC5C2C,iBAAiB,CAACf,MAAM,CAACd,KAAK,CAACoB,cAAc,EAAEpB,KAAK,CAACqB,WAAW,CAAC;EACjE,MAAM1B,KAAK,GAAGkC,iBAAiB,CAACE,QAAQ,CAAC,CAAC,CAACjD,MAAM;EACjD,MAAMc,GAAG,GAAGD,KAAK,GAAGK,KAAK,CAAC+B,QAAQ,CAAC,CAAC,CAACjD,MAAM;EAC3C,OAAO;IAACa,KAAK;IAAEC;EAAG,CAAC;AACrB;AAEA,SAASoC,eAAeA,CAAA,EAAG;EACzB,MAAMhB,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;EACvC,IAAIF,SAAS,EAAE;IACbA,SAAS,CAACiB,eAAe,CAAC,CAAC;EAC7B;AACF;AAEA,SAAST,oBAAoBA,CAACtC,MAAwB,EAAE;EACtD,IAAIA,MAAM,CAACgD,cAAc,KAAK,IAAI,IAAI,CAAChD,MAAM,CAACiD,KAAK,IAAI/D,YAAY,CAACgE,SAAS,EAAE;IAC7E;EACF;EAEA,MAAMpB,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;EACvC,IAAI,CAACF,SAAS,IAAKA,SAAS,IAAIA,SAAS,CAACW,UAAU,KAAK,CAAE,EAAE;IAC3D;EACF;EAEA,MAAMU,SAAS,GAAGrB,SAAS,CAACY,UAAU,CAAC,CAAC,CAAC,CAACU,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7D,MAAMC,YAAY,GAAGrD,MAAM,CAACsD,qBAAqB,CAAC,CAAC;;EAEnD;EACA,MAAMC,UAAU,GAAGC,UAAU,CAACzB,MAAM,CAAC0B,gBAAgB,CAACzD,MAAM,CAAC,CAACuD,UAAU,CAAC;EACzE,MAAMG,SAAS,GAAGF,UAAU,CAACzB,MAAM,CAAC0B,gBAAgB,CAACzD,MAAM,CAAC,CAAC2D,cAAc,CAAC;EAE5E,IAAIR,SAAS,IAAI,EAAEA,SAAS,CAACS,GAAG,IAAIP,YAAY,CAACO,GAAG,GAAGL,UAAU,GAAGG,SAAS,IAAIP,SAAS,CAACU,MAAM,IAAIR,YAAY,CAACQ,MAAM,GAAG,CAAC,IAAIN,UAAU,GAAGG,SAAS,CAAC,CAAC,EAAE;IACxJ,MAAMI,UAAU,GAAGX,SAAS,CAACS,GAAG,GAAGP,YAAY,CAACO,GAAG;IACnD,MAAMG,WAAW,GAAGV,YAAY,CAACW,MAAM;IACvC;IACA,MAAMC,WAAW,GAAGd,SAAS,CAACa,MAAM,GAAGD,WAAW,GAAGR,UAAU,GAAGG,SAAS,IAAIxE,YAAY,CAACgF,UAAU,GAAG,CAAC,GAAG,CAAC,IAAIX,UAAU,GAAGG,SAAS,CAAC,CAAC;IAE1I1D,MAAM,CAACmE,QAAQ,CAAC,CAAC,EAAEL,UAAU,GAAG9D,MAAM,CAACoE,SAAS,GAAGH,WAAW,CAAC;EACjE;AACF;AAEA,SAAQzB,wBAAwB,EAAED,eAAe,EAAE/B,iBAAiB,EAAET,WAAW,EAAE+C,eAAe,EAAER,oBAAoB"}
\ No newline at end of file
+{"version":3,"names":["BrowserUtils","prevTextLength","getPrevTextLength","findTextNodes","textNodes","node","nodeType","Node","TEXT_NODE","push","i","length","childNodes","childNode","setPrevText","target","_textNodes$map","text","map","e","nodeValue","join","split","setCursorPosition","start","end","_textNodes$map2","document","activeElement","range","createRange","selectNodeContents","textCharacters","prevChar","nextChar","charCount","startNode","endNode","n","textNode","nextCharCount","undefined","setStart","setEnd","collapse","selection","window","getSelection","setBaseAndExtent","startContainer","startOffset","endContainer","endOffset","scrollCursorIntoView","moveCursorToEnd","getCurrentCursorPosition","rangeCount","getRangeAt","preSelectionRange","cloneRange","toString","removeSelection","removeAllRanges","selectionStart","value","isFirefox","caretRect","getClientRects","editableRect","getBoundingClientRect","paddingTop","parseFloat","getComputedStyle","borderTop","borderTopWidth","top","bottom","topToCaret","inputHeight","height","inputOffset","isChromium","scrollTo","scrollTop"],"sourceRoot":"../../../src","sources":["web/cursorUtils.ts"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js b/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js
index 0c0d538..3de4592 100644
--- a/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js
+++ b/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js
@@ -16,7 +16,10 @@ function addStyling(targetElement, type, markdownStyle) {
       node.style.textDecoration = 'line-through';
       break;
     case 'emoji':
-      Object.assign(node.style, markdownStyle.emoji);
+      Object.assign(node.style, {
+        ...markdownStyle.emoji,
+        verticalAlign: 'middle'
+      });
       break;
     case 'mention-here':
       Object.assign(node.style, markdownStyle.mentionHere);
diff --git a/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js.map b/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js.map
index 2e4f75a..2da1c8a 100644
--- a/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js.map
+++ b/node_modules/@expensify/react-native-live-markdown/lib/module/web/parserUtils.js.map
@@ -1 +1 @@
-{"version":3,"names":["CursorUtils","BrowserUtils","addStyling","targetElement","type","markdownStyle","node","Object","assign","style","syntax","fontWeight","fontStyle","textDecoration","emoji","mentionHere","mentionUser","mentionReport","link","code","pre","blockquote","borderLeftStyle","display","maxWidth","boxSizing","h1","addSubstringAsTextNode","root","text","startIndex","endIndex","substring","length","appendChild","document","createTextNode","ungroupRanges","ranges","ungroupedRanges","forEach","range","depth","push","rangeWithoutDepth","Array","from","parseRangesToHTMLNodes","disableInlineStyles","createElement","className","textLength","stack","nestedStack","lastRangeEndIndex","shift","currentRoot","endOfCurrentRange","start","nextRangeStartIndex","span","prevRoot","pop","lastNestedNode","moveCursor","isFocused","alwaysMoveCursorToTheEnd","cursorPosition","target","moveCursorToEnd","setCursorPosition","parseText","cursorPositionIndex","activeElement","selection","getCurrentCursorPosition","end","global","parseExpensiMarkToRanges","markdownRanges","rootSpan","firstChild","innerHTML","innerText","dom","isChromium","setPrevText"],"sourceRoot":"../../../src","sources":["web/parserUtils.ts"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["CursorUtils","BrowserUtils","addStyling","targetElement","type","markdownStyle","node","Object","assign","style","syntax","fontWeight","fontStyle","textDecoration","emoji","verticalAlign","mentionHere","mentionUser","mentionReport","link","code","pre","blockquote","borderLeftStyle","display","maxWidth","boxSizing","h1","addSubstringAsTextNode","root","text","startIndex","endIndex","substring","length","appendChild","document","createTextNode","ungroupRanges","ranges","ungroupedRanges","forEach","range","depth","push","rangeWithoutDepth","Array","from","parseRangesToHTMLNodes","disableInlineStyles","createElement","className","textLength","stack","nestedStack","lastRangeEndIndex","shift","currentRoot","endOfCurrentRange","start","nextRangeStartIndex","span","prevRoot","pop","lastNestedNode","moveCursor","isFocused","alwaysMoveCursorToTheEnd","cursorPosition","target","moveCursorToEnd","setCursorPosition","parseText","cursorPositionIndex","activeElement","selection","getCurrentCursorPosition","end","global","parseExpensiMarkToRanges","markdownRanges","rootSpan","firstChild","innerHTML","innerText","dom","isChromium","setPrevText"],"sourceRoot":"../../../src","sources":["web/parserUtils.ts"],"mappings":"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"}
\ No newline at end of file
