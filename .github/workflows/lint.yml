name: eslint

# Only lint on branches that aren't related to master and the deploy process
on:
    push:
        branches-ignore:
            - 'master'
            - 'version-bump-*'
        tags-ignore:
            - '*'

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Use Node.js
              uses: actions/setup-node@v1
            - run: npm install
            - run: npm run lint
              env:
                  CI: true
            - name: Job failed Slack notification
              uses: rtCamp/action-slack-notify@master
              env:
                  SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
                  SLACK_CHANNEL: "#andrew-test"
                  SLACK_USERNAME: "Botify"
                  SLACK_ICON: "https://s3-us-west-2.amazonaws.com/slack-files2/avatars/2017-07-19/214290201728_e3b6a20b1b2cb3145d6f_72.png"
                  SLACK_COLOR: "#DB4545"
                  SLACK_TITLE: ðŸ’¥ ${{ github.repository }} failed on ${{ github.workflow }} workflow ðŸ’¥
                  SLACK_MESSAGE: ""
