# Welcome to the Expensify Help site

[Expensify Help](https://help.expensify.com/) is mainly composed of static HTML (`.html`) and Markdown (`.md`) files. We use [Jekyll](https://jekyllrb.com/) to generate a static site from those HTML and Markdown files.

### Table of Contents
* [Testing Locally](#testing-locally)
* [How the project is structured](#how-the-project-is-structured)
* [How to add a new Article](#how-to-add-a-new-article)
* [How the site is deployed](#how-the-site-is-deployed)

# Testing Locally

## Pre-requisites

- Clone and/or pull the [App repo](https://github.com/Expensify/App) to your local machine.
- Check the [requirements](https://jekyllrb.com/docs/installation/) to install Jekyll.
- Install Jekyll locally by running:
```
gem install bundler
cd docs
bundle install
```

## Steps

1. Open the Terminal command line in macOS.
2. Navigate to the `docs` folder in the command line.
3. Run `bundle exec jekyll serve --livereload`.
    - _Note: If you see an error like `Unable to load the EventMachine C Extension...`, try running `gem uninstall eventmachine && bundle install`. If that doesn't work just removing the `--livereload` flag should work._
4. Open http://localhost:4000 in the browser to see the site running locally.
5. Modify a `.html` or `.md` file and refresh the page in the browser.

# How the project is structured

The [docs](https://github.com/Expensify/App/tree/main/docs) folder will contain the following main folders:
- *_layouts*: This contains HTML templates used by Jekyll to create pages in the static site. For now it has only one file ([default.html](https://github.com/Expensify/App/blob/main/docs/_layouts/default.html)) which will render the common HTML elements and the assets on every page. It also supports the use of the [liquid template language](https://shopify.github.io/liquid/).
- *_includes*: Contains HTML content that can be reused on different pages. For now, it contains various html elements that are used to populate the left-hand-nav (LHN).
- *assets*: it will contain the three sub-folders css, images, and js.
  - The css folder can contain either .css or .sass files (where SASS files will be processed by Jekyll and it will generate a CSS file in an output folder also generated by Jekyll).
  -  In order to organize the image files, we're going to have multiple sub-folders grouped by subject in the images folder.
- *hubs*: it will contain two HTML files that will have the content of the `Request Money` and `Send Money` hub pages respectively.
- *articles*: it will contain sub-folders for each stage and each of them will contain all the articles related to that stage or subsection.
- *_site*: this will be the output folder that will contain the generated HTML files. This is the default name by Jekyll but can be changed.
index.html: it will have the homepage content.

More details about the Jekyll project structure can be found [here](https://jekyllrb.com/docs/structure/).

# How to add a new Article

## Add content

Copy the [template](https://github.com/Expensify/App/blob/main/docs/TEMPLATE.md) file and rename it with the name of the article title, i.e. [SmartScan.md](https://github.com/Expensify/App/blob/main/docs/articles/request-money/SmartScan.md) (you can use dashes for spaces in the file name if it's needed) and put the new file inside of the respective hub folder or sub-folder. The title will be rendered automatically according to the filename (the dashes will be removed in the generated site page).

The sections of the article will be filled and nested automatically in the LHN, just ensure to use the [heading markdown tags](https://www.markdownguide.org/cheat-sheet/) correctly.

## Add meta-description tags for SEO

At the top of template file we're going to find a few variables that will help us to define the meta-description of the article for SEO:

```
---
title: The title of the post, page, or document
description: A short description of the page's content
image: (Optional) URL to an image associated with the post, page, or document (e.g., /assets/page-pic.jpg)
author: (Optional) Page-, post-, or document-specific author information.
locale: (Optional) Page-, post-, or document-specific locale information. Takes priority over existing front matter attribute lang.
---
```

Just update the content for each variable accordingly or remove it if the information is not available. More details [here](https://github.com/jekyll/jekyll-seo-tag/blob/master/docs/usage.md#usage).

## Add a new entry in the hub page

There are 3 main components in the hub page: 1. Stage title, 2. Row of Card buttons and 3. Card buttons.

```html
<!-- 1. Stage title -->
<h2 id="request-money">
    Request Money
</h2>

<!-- 2. Row of Card buttons -->
<div class="cards-group">

    <!-- 3. Card buttons -->

    <a class="card" href="/articles/request-money/SmartScan">
        <div class="body">
            <h3 class="title">SmartScan</h3>
        </div>
        <div class="right-icon">
            <i class="fa-solid fa-angle-right icon"></i>
        </div>
    </a>

    <a class="card" href="/articles/request-money/AnotherArticle">
        <div class="body">
            <h3 class="title">Another Article</h3>
        </div>
        <div class="right-icon">
            <i class="fa-solid fa-angle-right icon"></i>
        </div>
    </a>

    <!-- More Card buttons here... -->

</div>
```
### Add a Stage title (optional)

In order to add a new stage title in the hub page just copy and paste the following HTML block in the respective hub page and modify the values accordingly:

```html
<h2 id="request-money">
    Request Money
</h2>
```

Where `id` is an arbitrary value that will help us to anchor this title to the LHN element.

### Add a Row of Card buttons (optional)

If it's required, you can add a new row of Card buttons with the following HTML block:

```html
<div class="cards-group">
    <!-- Add Cards components here -->
</div>
```

### Add a Card button

A card button is the box that contains the article title and the caret right icon `>`. It navigates to the article when it's pressed.

In order to add a new Card button in the respective hub page ([send-money/index.html](https://github.com/Expensify/App/blob/main/docs/hubs/send-money.html) or [request-money/index.html](https://github.com/Expensify/App/blob/main/docs/hubs/request-money.html)) just copy and pase the following Card element:

```html
<a class="card" href="/articles/request-money/SmartScan">
    <div class="body">
        <h3 class="title">SmartScan</h3>
    </div>
    <div class="right-icon">
        <i class="fa-solid fa-angle-right icon"></i>
    </div>
</a>
```

Then replace the article title accordingly (in this case replace the value `SmartScan` with the new article title) and add a link to the relative path of the article (in this case replace `./request-money/SmartScan` accordingly to the path of the new article file without the file extension).

## Add a new entry in the LHN page
To add a new entry to the LHN, simply update the _data/hubs.yml file with the new entry. Note that LHN "hubs" contain 1 or more stages, and stages can be either 1 article or multiple articles.

# How the site is deployed
This site is hosted on GitHub Pages. GitHub Pages has a built-in Jekyll integration, and we have it configured such that whenever code is merged to main, GitHub will automatically build the Jekyll site housed in the `/docs` directory and deploy it straight to production. The help site is publicly discoverable at https://help.expensify.com/
